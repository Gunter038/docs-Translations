"use strict";(self.webpackChunkcelestia_docs=self.webpackChunkcelestia_docs||[]).push([[7098],{3905:function(e,a,o){o.d(a,{Zo:function(){return c},kt:function(){return m}});var n=o(7294);function i(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function t(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?t(Object(o),!0).forEach((function(a){i(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function r(e,a){if(null==e)return{};var o,n,i=function(e,a){if(null==e)return{};var o,n,i={},t=Object.keys(e);for(n=0;n<t.length;n++)o=t[n],a.indexOf(o)>=0||(i[o]=e[o]);return i}(e,a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(n=0;n<t.length;n++)o=t[n],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var d=n.createContext({}),l=function(e){var a=n.useContext(d),o=a;return e&&(o="function"==typeof e?e(a):s(s({},a),e)),o},c=function(e){var a=l(e.components);return n.createElement(d.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var o=e.components,i=e.mdxType,t=e.originalType,d=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),u=l(o),m=i,b=u["".concat(d,".").concat(m)]||u[m]||p[m]||t;return o?n.createElement(b,s(s({ref:a},c),{},{components:o})):n.createElement(b,s({ref:a},c))}));function m(e,a){var o=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var t=o.length,s=new Array(t);s[0]=u;var r={};for(var d in a)hasOwnProperty.call(a,d)&&(r[d]=a[d]);r.originalType=e,r.mdxType="string"==typeof e?e:i,s[1]=r;for(var l=2;l<t;l++)s[l]=o[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,o)}u.displayName="MDXCreateElement"},2891:function(e,a,o){o.r(a),o.d(a,{assets:function(){return c},contentTitle:function(){return d},default:function(){return m},frontMatter:function(){return r},metadata:function(){return l},toc:function(){return p}});var n=o(7462),i=o(3366),t=(o(7294),o(3905)),s=["components"],r={},d=void 0,l={unversionedId:"concepts/how-celestia-works/data-availability-layer",id:"concepts/how-celestia-works/data-availability-layer",title:"data-availability-layer",description:"- - -",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/concepts/how-celestia-works/data-availability-layer.md",sourceDirName:"concepts/how-celestia-works",slug:"/concepts/how-celestia-works/data-availability-layer",permalink:"/es/concepts/how-celestia-works/data-availability-layer",draft:!1,editUrl:"https://github.com/celestiaorg/docs/tree/main/docs/concepts/how-celestia-works/data-availability-layer.md",tags:[],version:"current",frontMatter:{},sidebar:"concepts",previous:{title:"monolithic-vs-modular",permalink:"/es/concepts/how-celestia-works/monolithic-vs-modular"},next:{title:"transaction-lifecycle",permalink:"/es/concepts/how-celestia-works/transaction-lifecycle"}},c={},p=[{value:"Muestreo de Disponibilidad de Datos (DAS)",id:"muestreo-de-disponibilidad-de-datos-das",level:2},{value:"Escalabilidad",id:"escalabilidad",level:3},{value:"Prueba de Fraude de Datos Extendidos Incorrectamente",id:"prueba-de-fraude-de-datos-extendidos-incorrectamente",level:3},{value:"Nombre de Dominio de \xc1rboles de Merkle (NMTs)",id:"nombre-de-dominio-de-\xe1rboles-de-merkle-nmts",level:2},{value:"Construir una Blockchain PoS para DA",id:"construir-una-blockchain-pos-para-da",level:2},{value:"Proporcionando Disponibilidad de Datos",id:"proporcionando-disponibilidad-de-datos",level:3}],u={toc:p};function m(e){var a=e.components,r=(0,i.Z)(e,s);return(0,t.kt)("wrapper",(0,n.Z)({},u,r,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("hr",null),(0,t.kt)("p",null,"sidebar_label : Capa de disponibilidad de datos de Celestia"),(0,t.kt)("hr",null),(0,t.kt)("h1",{id:"capa-de-disponibilidad-de-datos-de-celestia"},"Capa de disponibilidad de datos de Celestia"),(0,t.kt)("p",null,"Celestia es una capa de disponibilidad de datos (DA) que proporciona una soluci\xf3n escalable al problema de disponibilidad de datos ",(0,t.kt)("a",{parentName:"p",href:"https://coinmarketcap.com/alexandria/article/what-is-data-availability"}),". Debido a la naturaleza sin permiso de las redes blockchain, una capa DA debe proporcionar un mecanismo para la ejecuci\xf3n y liquidaci\xf3n de capas para comprobar de una manera minimizada si los datos de transacci\xf3n est\xe1n efectivamente disponibles."),(0,t.kt)("p",null,"Dos caracter\xedsticas clave de la capa DA de Celestia son ",(0,t.kt)("a",{parentName:"p",href:"https://blog.celestia.org/celestia-mvp-release-data-availability-sampling-light-clients/"},"muestra de disponibilidad de datos")," (DAS) y ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/celestiaorg/nmt"},"los Nombres de Dominio de los \xe1rboles Merkle ")," (NMTs). Ambas caracter\xedsticas son nuevas soluciones de escalabilidad de la blockchain: DAS permite que los light nodes verifiquen la disponibilidad de datos sin necesidad de descargar un bloque completo; Los NMTs permiten la ejecuci\xf3n y liquidaci\xf3n de capas en Celestia para descargar transacciones que solo son relevantes para ellos."),(0,t.kt)("h2",{id:"muestreo-de-disponibilidad-de-datos-das"},"Muestreo de Disponibilidad de Datos (DAS)"),(0,t.kt)("p",null,"En general, los light nodes solo descargan los encabezados que contienen compromisos (es decir, ra\xedz de Merkle) de los datos del bloque (es decir, la lista de transacciones)."),(0,t.kt)("p",null,"Para hacer posible la DAS Celestia utiliza un esquema de codificaci\xf3n Reed-Solomon de 2 dimensiones para codificar los datos del bloque: cada dato de bloque se divide en fragmentos k \xd7 k, ordenado en una matriz k \xd7 k, y extendido con datos de paridad en una matriz extendida 2k \xd7 2k aplicando m\xfaltiples veces la codificaci\xf3n Reed-Salomon."),(0,t.kt)("p",null,"Entonces, se calculan las ra\xedces de Merkle 4k separadas para las filas y columnas de la matriz extendida; la ra\xedz Merkle de estas ra\xedces de Merkle se utiliza como el compromiso de datos de bloque en la cabecera de bloques."),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Codificaci\xf3n Reed-Saloman (RS) 2D",src:o(943).Z,width:"1452",height:"706"})),(0,t.kt)("p",null,"Para verificar que los datos est\xe1n disponibles, los light nodes de Celestia est\xe1n muestreando los fragmentos de datos 2k \xd7 2k."),(0,t.kt)("p",null,"Cada light node elige aleatoriamente un conjunto de coordenadas \xfanicas en la matriz extendida y consulta a los full nodes para los fragmentos de datos y pruebas de Merkle correspondientes en esas coordenadas. Si los light nodes reciben una respuesta v\xe1lida para cada consulta de muestreo, entonces hay una ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/celestiaorg/celestia-node/issues/805#issuecomment-1150081075"},"garant\xeda de alta probabilidad")," de que todos los datos del bloque est\xe1n disponibles."),(0,t.kt)("p",null,"Adem\xe1s, cada fragmento de datos recibido con una prueba de Merkle correcta es informado a la red. Como resultado, mientras los light nodes de Celestia muestreen suficientes fragmentos de datos (i.., al menos k \xd7 k fragmentos \xfanicos), el bloque completo puede ser recuperado por full nodes honestos."),(0,t.kt)("p",null,"Para m\xe1s detalles sobre DAS, echa un vistazo al ",(0,t.kt)("a",{parentName:"p",href:"https://arxiv.org/abs/1809.09044"},"original paper"),"."),(0,t.kt)("h3",{id:"escalabilidad"},"Escalabilidad"),(0,t.kt)("p",null,"La DAS permite a Celestia escalar la capa DA. La DAS puede ser realizada por light nodes limitados a recursos, ya que cada light node solo muestra una peque\xf1a porci\xf3n de los datos del bloque. Cuantos m\xe1s light nodes haya en la red, m\xe1s datos podr\xe1n descargar y almacenar de forma conjunta."),(0,t.kt)("p",null,"Esto significa que aumentar el n\xfamero de light nodes que realizan DAS permite bloques m\xe1s grandes (i.., con m\xe1s transacciones), sin dejar de mantener la funci\xf3n DAS para light nodes limitados a recursos. Sin embargo, para validar encabezados de bloques, los nodos de Celestia necesitan descargar las ra\xedces intermedias de Merkle."),(0,t.kt)("p",null,"Para un tama\xf1o de bloque de datos de n bytes, significa que cada light node debe descargar O(n) bytes. Por lo tanto, cualquier mejora en la capacidad de ancho de banda de los light nodes de Celestia tiene un efecto cuadr\xe1tico en el recorrido de la capa DA de Celestia."),(0,t.kt)("h3",{id:"prueba-de-fraude-de-datos-extendidos-incorrectamente"},"Prueba de Fraude de Datos Extendidos Incorrectamente"),(0,t.kt)("p",null,"El requisito para descargar las ra\xedces intermedias de Merkle 4k es una consecuencia del uso de un esquema de codificaci\xf3n Reed-Salomon de 2 dimensiones. Alternativamente, el DAS podr\xeda ser dise\xf1ado con un est\xe1ndar (i.e. de 1 dimensi\xf3n) con codificaci\xf3n Reed-Salomon, donde los datos originales se dividen en fragmentos k y se extienden con k fragmentos adicionales de datos de paridad. Dado que el compromiso de datos de bloques es la ra\xedz de Merkle de los fragmentos de datos resultantes de 2k, los light nodes ya no necesitan descargar O(n) bytes para validar las cabeceras de bloque."),(0,t.kt)("p",null,"La desventaja de la codificaci\xf3n est\xe1ndar Reed-Salomon es tratar con los productores de bloques maliciosos que generan los datos extendidos incorrectamente."),(0,t.kt)("p",null,"Esto es posible ya que ",(0,t.kt)("strong",{parentName:"p"},"Celestia no requiere que la mayor\xeda del consenso (i.., los productores de bloques) sean honestos para garantizar la disponibilidad de datos.")," Por lo tanto, si los datos extendidos son inv\xe1lidos, los datos originales podr\xedan no ser recuperables, incluso si los light nodes est\xe1n muestreando suficientes fragmentos \xfanicos (i.., al menos k para una codificaci\xf3n est\xe1ndar y k \xd7 k para una codificaci\xf3n de 2 dimensiones)."),(0,t.kt)("p",null,"Como soluci\xf3n, la ",(0,t.kt)("em",{parentName:"p"},"Prueba de Fraude de Datos Extendidos Incorrectamente")," habilita a los light nodes para rechazar bloques con datos extendidos inv\xe1lidos. Tales pruebas requieren reconstruir la codificaci\xf3n y verificar el desajuste de funciones. Con la codificaci\xf3n est\xe1ndar Reed-Salomon, esto implica descargar los datos originales, por ejemplo, O(n) bytes. En resumen, con codificaci\xf3n Reed-Salomon de 2 dimensiones, solo se requieren O(n ) bytes ya que es suficiente para verificar solo una fila o una columna de la matriz extendida."),(0,t.kt)("h2",{id:"nombre-de-dominio-de-\xe1rboles-de-merkle-nmts"},"Nombre de Dominio de \xc1rboles de Merkle (NMTs)"),(0,t.kt)("p",null,"Celestia fragmenta los datos del bloque en m\xfaltiples nombres de dominio, uno para cada aplicaci\xf3n (por ejemplo, rollup) usando la capa DA. Como resultado, cada aplicaci\xf3n necesita descargar solo sus propios datos y puede ignorar los datos de otras aplicaciones."),(0,t.kt)("p",null,"Para que esto funcione, la capa DA debe ser capaz de demostrar que los datos proporcionados est\xe1n completos, i.., se retornan todos los datos de un espacio de nombres de dominio determinado. Con este fin, Celestia est\xe1 utilizando los nombre de dominio de \xe1rboles Merkle (NMTs)."),(0,t.kt)("p",null,"Un NMT es un \xe1rbol Merkle con las hojas ordenadas por los identificadores del nombre de dominio y la funci\xf3n hash modificada para que cada nodo en el \xe1rbol incluya el rango de espacios de nombres de dominio de todos sus descendientes. La siguiente figura muestra un ejemplo de un NMT con altura tres (es decir, ocho fragmentos de datos). Los datos se fragmentan en tres nombres de dominio."),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Nombre de Dominio de \xc1rboles de Merkle (NMTs)",src:o(4563).Z,width:"1476",height:"594"})),(0,t.kt)("p",null,"Cuando una aplicaci\xf3n solicita los datos para el nombre de dominio 2, la capa DA debe proporcionar los fragmentos de datos ",(0,t.kt)("inlineCode",{parentName:"p"},"D3"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"D4"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"D5"),", y ",(0,t.kt)("inlineCode",{parentName:"p"},"D6")," y los nodos ",(0,t.kt)("inlineCode",{parentName:"p"},"N2"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"N8")," y ",(0,t.kt)("inlineCode",{parentName:"p"},"N7")," como prueba (ten en cuenta que la aplicaci\xf3n ya tiene la ra\xedz ",(0,t.kt)("inlineCode",{parentName:"p"},"N14")," de el encabezado del bloque)."),(0,t.kt)("p",null,"Como resultado, la aplicaci\xf3n es capaz de comprobar que los datos proporcionados son parte de los datos del bloque. Adem\xe1s, la aplicaci\xf3n puede verificar que se proporcionaron todos los datos para el nombre de dominio 2. Si la capa DA proporciona, por ejemplo, s\xf3lo los fragmentos de datos ",(0,t.kt)("inlineCode",{parentName:"p"},"D4")," y ",(0,t.kt)("inlineCode",{parentName:"p"},"D5"),", tambi\xe9n debe proporcionar los nodos ",(0,t.kt)("inlineCode",{parentName:"p"},"N12")," y ",(0,t.kt)("inlineCode",{parentName:"p"},"N11")," como pruebas. Sin embargo, la aplicaci\xf3n puede identificar que los datos est\xe1n incompletos comprobando el rango de nombre de dominio de los dos nodos, i.., tanto ",(0,t.kt)("inlineCode",{parentName:"p"},"N12")," como ",(0,t.kt)("inlineCode",{parentName:"p"},"N11")," tienen descendientes parte del nombre de dominio 2."),(0,t.kt)("p",null,"Para m\xe1s detalles sobre DAS, echa un vistazo al ",(0,t.kt)("a",{parentName:"p",href:"https://arxiv.org/abs/1905.09274"},"original paper"),"."),(0,t.kt)("h2",{id:"construir-una-blockchain-pos-para-da"},"Construir una Blockchain PoS para DA"),(0,t.kt)("h3",{id:"proporcionando-disponibilidad-de-datos"},"Proporcionando Disponibilidad de Datos"),(0,t.kt)("p",null,"La capa de Celestia DA consiste en una blockchain PoS. Celestia apunta a esta blockchain como la ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/celestiaorg/celestia-app"},"App de Celestia"),", una aplicaci\xf3n que proporciona transacciones para facilitar la capa DA y que se construye usando ",(0,t.kt)("a",{parentName:"p",href:"https://docs.cosmos.network/v0.44/"},"Cosmos SDK"),". La siguiente figura muestra los componentes principales de la App de Celestia."),(0,t.kt)("p",null,(0,t.kt)("img",{alt:"Componentes principales de la App de Celestia",src:o(4225).Z,width:"668",height:"640"})),(0,t.kt)("p",null,"La App de Celestia se construye sobre ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/celestiaorg/celestia-core"},"Celestia Core"),", una versi\xf3n modificada del ",(0,t.kt)("a",{parentName:"p",href:"https://arxiv.org/abs/1807.04938"},"algoritmo de consenso de Tendermint"),". Entre los cambios m\xe1s importantes en Tendermint, Celestia Core:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Habilita la codificaci\xf3n de borrado de los datos de bloque (usando el esquema de codificaci\xf3n de 2 dimensiones Reed-Solomon)."),(0,t.kt)("li",{parentName:"ul"},"Reemplaza el \xe1rbol de Merkle utilizado por Tendermint para almacenar los datos de bloques con un ",(0,t.kt)("a",{parentName:"li",href:"https://github.com/celestiaorg/nmt"},"\xe1rbol de Merkle con nombre de dominio")," que habilita las capas anteriores (i.., ejecuci\xf3n y liquidaci\xf3n) para descargar s\xf3lo los datos necesarios (para m\xe1s detalles, mira la secci\xf3n de abajo que describe los casos de uso).")),(0,t.kt)("p",null,"Para m\xe1s detalles sobre los cambios en Tendermint, echa un vistazo a ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/celestiaorg/celestia-core/tree/v0.34.x-celestia/docs/celestia-architecture"},"ADRs"),". Ten en cuenta que los nodos de Celestia Core siguen utilizando la red p2p de Tendermint."),(0,t.kt)("p",null,"Del mismo modo, Celestia Core est\xe1 conectado a Tendermint a la capa de aplicaci\xf3n (i.e. la m\xe1quina del estado) por ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/tendermint/tendermint/tree/master/spec/abci%2B%2B"},"ABCI++"),", una evoluci\xf3n importante de ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/tendermint/tendermint/tree/master/spec/abci"},"ABCI")," (Aplicaci\xf3n de Interfaz de Blockchain)."),(0,t.kt)("p",null,"La m\xe1quina de estado de la App de Celestia es necesaria para ejecutar la l\xf3gica de PoS y para habilitar la gobernanza de la capa DA."),(0,t.kt)("p",null,"Sin embargo, la App de Celestia es agn\xf3stica -- la m\xe1quina de estado ni valida ni almacena los datos que pone a disposici\xf3n la App de Celestia."))}m.isMDXComponent=!0},4225:function(e,a,o){a.Z=o.p+"assets/images/celestia-app-94d3b9baaf383a59904fe08da53afa59.png"},4563:function(e,a,o){a.Z=o.p+"assets/images/nmt-7c7465b2182089e26c575e45684ae07f.png"},943:function(e,a,o){a.Z=o.p+"assets/images/reed-solomon-encoding-f362028ac31a62b75ff08bd2d4212427.png"}}]);