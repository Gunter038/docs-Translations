"use strict";(self.webpackChunkcelestia_docs=self.webpackChunkcelestia_docs||[]).push([[2116],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return A}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),u=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=u(e.components);return a.createElement(i.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=u(t),A=r,m=c["".concat(i,".").concat(A)]||c[A]||p[A]||l;return t?a.createElement(m,s(s({ref:n},d),{},{components:t})):a.createElement(m,s({ref:n},d))}));function A(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,s=new Array(l);s[0]=c;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var u=2;u<l;u++)s[u]=t[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},2023:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return i},default:function(){return A},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return p}});var a=t(7462),r=t(3366),l=(t(7294),t(3905)),s=["components"],o={},i=void 0,u={unversionedId:"developers/node-tutorial",id:"developers/node-tutorial",title:"node-tutorial",description:"- - -",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/developers/node-tutorial.md",sourceDirName:"developers",slug:"/developers/node-tutorial",permalink:"/fr/developers/node-tutorial",draft:!1,editUrl:"https://github.com/celestiaorg/docs/tree/main/docs/developers/node-tutorial.md",tags:[],version:"current",frontMatter:{},sidebar:"developers",previous:{title:"celestia-node",permalink:"/fr/developers/celestia-node"},next:{title:"light-node-video",permalink:"/fr/developers/light-node-video"}},d={},p=[{value:"Hardware Requis",id:"hardware-requis",level:2},{value:"Configuration des d\xe9pendances",id:"configuration-des-d\xe9pendances",level:2},{value:"Installer Golang",id:"installer-golang",level:3},{value:"Node Celestia",id:"node-celestia",level:2},{value:"Installer Celestia node",id:"installer-celestia-node",level:3},{value:"Instancier un Light Node Celestia",id:"instancier-un-light-node-celestia",level:3},{value:"Se connecter \xe0 un point de terminaison public principal",id:"se-connecter-\xe0-un-point-de-terminaison-public-principal",level:3},{value:"Cl\xe9s et portefeuilles",id:"cl\xe9s-et-portefeuilles",level:3},{value:"Requ\xeate d&#39;API Node",id:"requ\xeate-dapi-node",level:2},{value:"Solde",id:"solde",level:3},{value:"Obtenir l&#39;en-t\xeate du bloc",id:"obtenir-len-t\xeate-du-bloc",level:3},{value:"Soumettre une transaction PFD",id:"soumettre-une-transaction-pfd",level:3},{value:"D\xe9pannage",id:"d\xe9pannage",level:4},{value:"Obtenir des partages d&#39;espace de noms par hauteur de bloc",id:"obtenir-des-partages-despace-de-noms-par-hauteur-de-bloc",level:3}],c={toc:p};function A(e){var n=e.components,t=(0,r.Z)(e,s);return(0,l.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("hr",null),(0,l.kt)("p",null,"sidebar_label : Tutoriel du node"),(0,l.kt)("hr",null),(0,l.kt)("h1",{id:"obtenir-et-envoyer-des-transactions-avec-celestia-node"},"Obtenir et envoyer des transactions avec Celestia node"),(0,l.kt)("p",null,"Dans ce tutoriel, nous couvrirons comment utiliser l'API Celestia Node pour soumettre et r\xe9cup\xe9rer les messages de la couche de disponibilit\xe9 de donn\xe9es par leur identifiant d'espace de noms."),(0,l.kt)("p",null,"Ce tutoriel est adapt\xe9 \xe0 un travail en environnement Linux."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Pour voir un tutoriel vid\xe9o pour la mise en place d'un Celestia Light Node, cliquez sur ",(0,l.kt)("a",{parentName:"p",href:"/fr/developers/light-node-video"},"ici"))),(0,l.kt)("h2",{id:"hardware-requis"},"Hardware Requis"),(0,l.kt)("p",null,"Les exigences mat\xe9rielles minimales recommand\xe9es pour lancer un light node sont les suivantes:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"M\xe9moire vive : 2GB RAM"),(0,l.kt)("li",{parentName:"ul"},"Processeur : simple c\u0153ur"),(0,l.kt)("li",{parentName:"ul"},"Disque dur\xa0: 5\u2009Go SSD"),(0,l.kt)("li",{parentName:"ul"},"Bande-passante : 56 ko/s download/56ko/s upload")),(0,l.kt)("h2",{id:"configuration-des-d\xe9pendances"},"Configuration des d\xe9pendances"),(0,l.kt)("p",null,"Premi\xe8rement, v\xe9rifiez que votre syst\xe8me d'exploitation est \xe0 jour ou mettez le \xe0 jour:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"# Si vous utilisez le gestionnaire APT \nsudo apt update && sudo apt upgrade -y\n\n# Si vous utilisez le gestionnaire YUM\nsudo yum update\n")),(0,l.kt)("p",null,"Ce sont des paquets essentiels pour ex\xe9cuter de nombreuses t\xe2ches comme le t\xe9l\xe9chargement de fichiers, la compilation et la surveillance du n\u0153ud :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"# Si vous utilisez le gestionnaire APT \nsudo apt install curl tar wget clang pkg-config libssl-dev jq build-essential git make ncdu -y\n\n# Si vous utilisez le gestionnaire YUM \nsudo yum install curl tar wget clang pkg-config libssl-dev jq build-essential git make ncdu -y\n")),(0,l.kt)("h3",{id:"installer-golang"},"Installer Golang"),(0,l.kt)("p",null,"La Celestia-app et le n\u0153ud Celestia sont cod\xe9s en ",(0,l.kt)("a",{parentName:"p",href:"https://go.dev/"},"Golang")," donc nous devons installer Golang pour les construire et les mettre en application."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'ver="1.19.1"\ncd $HOME\nwget "https://golang.org/dl/go$ver.linux-amd64.tar.gz"\nsudo rm -rf /usr/local/go\nsudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz"\nrm "go$ver.linux-amd64.tar.gz"\n')),(0,l.kt)("p",null,"Maintenant nous devons ajouter le r\xe9pertoire ",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/local/go/bin")," \xe0 ",(0,l.kt)("inlineCode",{parentName:"p"},"$PATH"),"\xa0:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.bash_profile\nsource $HOME/.bash_profile\n')),(0,l.kt)("p",null,"Pour v\xe9rifier que Go a \xe9t\xe9 install\xe9 correctement, lancez :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"go version\n")),(0,l.kt)("p",null,"La sortie doit \xeatre la version install\xe9e ci-apr\xe8s :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"go version go1.18.2 linux/amd64\n")),(0,l.kt)("h2",{id:"node-celestia"},"Node Celestia"),(0,l.kt)("h3",{id:"installer-celestia-node"},"Installer Celestia node"),(0,l.kt)("p",null,"Installez le binaire du n\u0153ud Celestia en ex\xe9cutant les commandes suivantes :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"cd $HOME\nrm -rf celestia-node\ngit clone https://github.com/celestiaorg/celestia-node.git\ncd celestia-node/\ngit checkout tags/v0.3.1\nmake install\nmake cel-ke\n")),(0,l.kt)("p",null,"V\xe9rifiez que le binaire fonctionne et la version avec la commande celestia ci-dessous :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"$ celestia version\nSemantic version: v0.3.1\nCommit: 8bce8d023f9d0a1929e56885e439655717aea4e4\nBuild Date: Thu Sep 22 15:15:43 UTC 2022\nSystem version: amd64/linux\nGolang version: go1.19.1\n")),(0,l.kt)("h3",{id:"instancier-un-light-node-celestia"},"Instancier un Light Node Celestia"),(0,l.kt)("p",null,"Maintenant, instancions un Light node Celestia:"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: Les points de terminaison RPC sont expos\xe9s dans tous les types de Nodes Celestia, tels que Light, Bridge et Full Nodes.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light init\n")),(0,l.kt)("h3",{id:"se-connecter-\xe0-un-point-de-terminaison-public-principal"},"Se connecter \xe0 un point de terminaison public principal"),(0,l.kt)("p",null,"Nous allons maintenant ex\xe9cuter le Light Node Celestia avec une connexion GRPC \xe0 un exemple d'Endpoint noyau."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Remarque : Vous \xeates \xe9galement encourag\xe9 \xe0 trouver un point de terminaison API de la communaut\xe9 et il y en a plusieurs dans le Discord. Celui-ci est utilis\xe9 \xe0 des fins de d\xe9monstrations. Vous pouvez trouver une liste de points d'appel \xe0 distance (RPC) ",(0,l.kt)("a",{parentName:"p",href:"/fr/nodes/arabica-devnet#rpc-endpoints"},"ici"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip <ip-address> --core.grpc.port <port>\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"NOTE : Le port ",(0,l.kt)("inlineCode",{parentName:"p"},"--core.grpc.port")," est configur\xe9 par d\xe9faut \xe0 9090, donc si vous n'en sp\xe9cifiez pas un autre dans la ligne de commande, il s'ex\xe9cutera \xe0 celui-l\xe0 par d\xe9faut. Vous pouvez utiliser le drapeau (flag) pour sp\xe9cifier un autre port si vous pr\xe9f\xe9rez.")),(0,l.kt)("p",null,"Par exemple, votre commande avec un point de terminaison RPC (appel de proc\xe9dure \xe0 distance) peut ressembler \xe0 ceci :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip https://limani.celestia-devops.dev --core.grpc.port 9090\n")),(0,l.kt)("h3",{id:"cl\xe9s-et-portefeuilles"},"Cl\xe9s et portefeuilles"),(0,l.kt)("p",null,"Vous pouvez cr\xe9er vos cl\xe9s pour votre n\u0153ud en lan\xe7ant la commande suivante :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"./cel-key add <key_name> --keyring-backend test --node.type light\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip <ip-address> --core.grpc.port <port> --keyring.accname <key_name> \n")),(0,l.kt)("p",null,"Lorsque vous lancez le Light Node, une cl\xe9 de s\xe9curit\xe9 du portefeuille sera g\xe9n\xe9r\xe9e pour vous. Vous aurez besoin d'envoyer des tokens Arabica devnet \xe0 cette adresse pour payer les transactions PayForData."),(0,l.kt)("p",null,"Vous pouvez trouver cette adresse en lan\xe7ant la commande suivante dans le r\xe9pertoire ",(0,l.kt)("inlineCode",{parentName:"p"},"celestia-node")," :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"./cel-key list --node.type light --keyring-backend test\n")),(0,l.kt)("p",null,"Si vous souhaitez approvisionner votre portefeuille en tokens de testnet, dirigez vous vers le canal Discord ",(0,l.kt)("inlineCode",{parentName:"p"},"#arabica-faucet"),"."),(0,l.kt)("p",null,"Vous pouvez demander des fonds \xe0 l'adresse de votre portefeuille en utilisant la commande suivante dans Discord:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"$request <Wallet-Address>\n")),(0,l.kt)("p",null,"O\xf9 ",(0,l.kt)("inlineCode",{parentName:"p"},"<Wallet-Address>")," est l'adresse ",(0,l.kt)("inlineCode",{parentName:"p"},"celestia1******")," g\xe9n\xe9r\xe9e \xe0 la cr\xe9ation du wallet."),(0,l.kt)("p",null,"Une fois que tout est configur\xe9, vous pouvez passer \xe0 l'\xe9tape suivante."),(0,l.kt)("h2",{id:"requ\xeate-dapi-node"},"Requ\xeate d'API Node"),(0,l.kt)("p",null,"Ouvrez une autre fen\xeatre de terminal afin de commencer \xe0 interroger l'API. ",(0,l.kt)("inlineCode",{parentName:"p"},"celestia-node")," expose son point de terminaison RPC sur le port ",(0,l.kt)("inlineCode",{parentName:"p"},"26658")," par d\xe9faut."),(0,l.kt)("h3",{id:"solde"},"Solde"),(0,l.kt)("p",null,"Maintenant, interrogeons notre Node pour conna\xeetre le solde de son compte par d\xe9faut (qui est le compte associ\xe9 avec la cl\xe9 ",(0,l.kt)("inlineCode",{parentName:"p"},"developer")," g\xe9n\xe9r\xe9e plus t\xf4t):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"curl -X GET http://127.0.0.1:26658/balance\n")),(0,l.kt)("p",null,"Il produira ce qui suit :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "denom":"utia",\n   "amount":"999995000000000"\n}\n')),(0,l.kt)("p",null,"Cela vous montre le solde de ce portefeuille."),(0,l.kt)("h3",{id:"obtenir-len-t\xeate-du-bloc"},"Obtenir l'en-t\xeate du bloc"),(0,l.kt)("p",null,"Maintenant, r\xe9cup\xe9rons les informations de l'en-t\xeate de bloc."),(0,l.kt)("p",null,"Ici nous allons obtenir l'en-t\xeate du bloc 1:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"curl -X GET http://127.0.0.1:26658/header/1\n")),(0,l.kt)("p",null,"Vous verrez quelque chose comme ceci\xa0:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "header":{\n      "version":{\n         "block":11\n      },\n      "chain_id":"devnet-2",\n      "height":1,\n      "time":"2021-11-23T02:24:05.965728875Z",\n      "last_block_id":{\n         "hash":"",\n         "parts":{\n            "total":0,\n            "hash":""\n         }\n      },\n      "last_commit_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",\n      "data_hash":"7B578B351B1B0BBD70BB350019EBC964C44A140A37EF715B552A7F8F315ACD19",\n      "validators_hash":"7F4EA93A134DEDBDA6A1FDD30D05760DD98A2B5FBA95DB3EFFFE7FCE4B361855",\n      "next_validators_hash":"7F4EA93A134DEDBDA6A1FDD30D05760DD98A2B5FBA95DB3EFFFE7FCE4B361855",\n      "consensus_hash":"048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",\n      "app_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",\n      "last_results_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",\n      "evidence_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",\n      "proposer_address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E"\n   },\n   "commit":{\n      "height":1,\n      "round":1,\n      "block_id":{\n         "hash":"4632277C441CA6155C4374AC56048CF4CFE3CBB2476E07A548644435980D5E17",\n         "parts":{\n            "total":1,\n            "hash":"BE1B789969938DB061B7723BE45C8A7B4B27192339A8E0A4E216775B2CB58D97"\n         }\n      },\n      "signatures":[\n         {\n            "block_id_flag":2,\n            "validator_address":"03F1044A6DF782189C7061FF89146B3D33608F17",\n            "timestamp":"2021-11-23T11:53:56.123958759Z",\n            "signature":"q/XF7Nc2ThcQgWfqi6LYOUEqLcU+sgVPY1nB2CLWdjRo80WwI6xy6QaYx1B0lmcKAkWR0YMxbc7vJzKF70qwBA=="\n         },\n         {\n            "block_id_flag":2,\n            "validator_address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E",\n            "timestamp":"2021-11-23T11:53:56.036027188Z",\n            "signature":"0bbxeviCvgLlyIF47JoY1CMN2e/MhHtFzhdgV0zCM+P3qeO/rkh+0TSxoRVUB1MDvMCoA8hyffCw3amxympMAA=="\n         },\n         {\n            "block_id_flag":2,\n            "validator_address":"31711F367349D1BD619BD0A39568A69614B8A048",\n            "timestamp":"2021-11-23T11:53:56.135943844Z",\n            "signature":"gT23rZ8+XcG5rQ9QS+uh+Wn5eAiJDVy8bh23Fb8hevnHsuO1er2892MXAohaLRF6TTWs/C6dItYph4B/k3b6DQ=="\n         },\n         {\n            "block_id_flag":2,\n            "validator_address":"5A253EC2A9AB20AFD48C7BED2AFCA53F5C80BCA6",\n            "timestamp":"2021-11-23T11:53:56.081698742Z",\n            "signature":"nMngIlJ7PPPtu0N20YwKhWt/H3/JrEKJC3rnS5KG/8J3IppTacuwjGDUqIuHpRlrD0MmWa1mlY+6+ulbytt2AA=="\n         },\n         {\n            "block_id_flag":2,\n            "validator_address":"79BEB39F4B396F9278DA03F1C97F9BE3B10B12D3",\n            "timestamp":"2021-11-23T11:53:56.037896319Z",\n            "signature":"wPAL/sK4YXSU7iRXl00GDLvi4IItVlkY2zRkxIUeV9VA3Tq8Tke6wGE0N6pXKmtMcKUMoyjm03RWHv4mrtj1BA=="\n         },\n         {\n            "block_id_flag":1,\n            "validator_address":"",\n            "timestamp":"0001-01-01T00:00:00Z",\n            "signature":null\n         },\n         {\n            "block_id_flag":1,\n            "validator_address":"",\n            "timestamp":"0001-01-01T00:00:00Z",\n            "signature":null\n         },\n         {\n            "block_id_flag":2,\n            "validator_address":"D345D62BBD18C301B843DF7C65F10E57AB17BD98",\n            "timestamp":"2021-11-23T11:53:56.123499237Z",\n            "signature":"puj5Epw3yPGjSsJk6aQI74S2prgL7+cuiEpCxXYzQxOi0kNIqh8UMZLYf+AVHDQNJXehSmrAK6+VsIt9NF0DDg=="\n         },\n         {\n            "block_id_flag":2,\n            "validator_address":"DEC2642E786A941511A401090D21621E7F08A36D",\n            "timestamp":"2021-11-23T11:53:56.123136439Z",\n            "signature":"J/lnFqARXj42Lfx5MGY0FO/wug+AyQRxTnQp1u1HyczvV+0hXXuk06Uosi61jQKgJG6JBJF2VidqA41/uKMEDw=="\n         }\n      ]\n   },\n   "validator_set":{\n      "validators":[\n         {\n            "address":"03F1044A6DF782189C7061FF89146B3D33608F17",\n            "pub_key":"sMcFgSIzlD77eZYgV7H4akyxoHCPc2oIQW05qWEB6b4=",\n            "voting_power":5000,\n            "proposer_priority":-40000\n         },\n         {\n            "address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E",\n            "pub_key":"WdqZ8hoyc1HxZCJfQrAGKm2fFJZFg7PngPNGkA1RWXc=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"31711F367349D1BD619BD0A39568A69614B8A048",\n            "pub_key":"pvwSRksq3ekXIiYK7IzjQJ870BxLqEma8zRr9n9VnXI=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"5A253EC2A9AB20AFD48C7BED2AFCA53F5C80BCA6",\n            "pub_key":"RnmnTlKoKxNoh2TpohBDP3cKlx4ATiPOCvQFk/6xpUU=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"79BEB39F4B396F9278DA03F1C97F9BE3B10B12D3",\n            "pub_key":"oh/N+GOIennBOAa/gPNCso1mDlqaHQNn7Op/X8opbeY=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"7F1105B7B219481810C49730AECB1A83036BCA3A",\n            "pub_key":"Ow/AHP/Q3guPGymUKpvhnwae+QoCOpGztpVnP179IG8=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"87265CC17922E01497F40B701EC9F05373B83467",\n            "pub_key":"MNi0Z+uNF5X1Bxj988IDXVl0BKUcLs7LItoMnX6dbg4=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"D345D62BBD18C301B843DF7C65F10E57AB17BD98",\n            "pub_key":"4g3hhdyU4IIgWW/4sR0nax8bsC/M/fDbt1N8s/QanF8=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         },\n         {\n            "address":"DEC2642E786A941511A401090D21621E7F08A36D",\n            "pub_key":"b+Vv6Lcp0bhIjOQncr+OYBHixCvU5+k34y4RqyvpluE=",\n            "voting_power":5000,\n            "proposer_priority":5000\n         }\n      ],\n      "proposer":{\n         "address":"03F1044A6DF782189C7061FF89146B3D33608F17",\n         "pub_key":"sMcFgSIzlD77eZYgV7H4akyxoHCPc2oIQW05qWEB6b4=",\n         "voting_power":5000,\n         "proposer_priority":-40000\n      }\n   },\n   "dah":{\n      "row_roots":[\n         "//////////7//////////uyLCVMJmAItYqbOqgHXm3OwHsq1xQiAX1kZV2Tgcobm",\n         "/////////////////////ykyWNfDJZfigziZC5BN5L00KKuoyDPduwynDywauskL"\n      ],\n      "column_roots":[\n         "//////////7//////////uyLCVMJmAItYqbOqgHXm3OwHsq1xQiAX1kZV2Tgcobm",\n         "/////////////////////ykyWNfDJZfigziZC5BN5L00KKuoyDPduwynDywauskL"\n      ]\n   }\n}\n')),(0,l.kt)("h3",{id:"soumettre-une-transaction-pfd"},"Soumettre une transaction PFD"),(0,l.kt)("p",null,"Dans cet exemple, nous soumettrons une transaction PayForData au point de terminaison ",(0,l.kt)("inlineCode",{parentName:"p"},"/submit_pfd")," du node."),(0,l.kt)("p",null,"Quelques \xe9l\xe9ments \xe0 prendre en consid\xe9ration :"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"PFD est un message PayForData."),(0,l.kt)("li",{parentName:"ul"},"Le point de terminaison prend \xe9galement les valeurs ",(0,l.kt)("inlineCode",{parentName:"li"},"namespace_id")," et ",(0,l.kt)("inlineCode",{parentName:"li"},"data"),"."),(0,l.kt)("li",{parentName:"ul"},"L'identifiant de l'espace de noms doit \xeatre de 8 octets."),(0,l.kt)("li",{parentName:"ul"},"Les donn\xe9es sont en octets cod\xe9es en hexad\xe9cimal du message brut."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"gas_limit")," est la limite de gaz \xe0 utiliser pour la transaction.")),(0,l.kt)("p",null,"Nous utilisons le ",(0,l.kt)("inlineCode",{parentName:"p"},"namespace_id suivant")," de ",(0,l.kt)("inlineCode",{parentName:"p"},"0000010000000100")," et les ",(0,l.kt)("inlineCode",{parentName:"p"},"donn\xe9es")," valeur de ",(0,l.kt)("inlineCode",{parentName:"p"},"f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5"),"."),(0,l.kt)("p",null,"Vous pouvez g\xe9n\xe9rer vos propres ",(0,l.kt)("inlineCode",{parentName:"p"},"namespace_id")," et valeurs de donn\xe9es en utilisant ce terrain de jeu Golang utile que nous avons cr\xe9\xe9 ",(0,l.kt)("a",{parentName:"p",href:"https://go.dev/play/p/7ltvaj8lhRl"},"ici"),"."),(0,l.kt)("p",null,"Ex\xe9cutez ce qui suit :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X POST -d \'{"namespace_id": "0c204d39600fddd3",\n  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",\n  "gas_limit": 60000}\' http://localhost:26658/submit_pfd\n')),(0,l.kt)("p",null,"Nous obtenons la sortie suivante :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "height":2452,\n   "txhash":"04A79AF9DA62FDB41ACD7D82EB0B9004AE4E4ED603B280A65816560B4F38A999",\n   "data":"12200A1E2F7061796D656E742E4D7367506179466F7244617461526573706F6E7365",\n   "raw_log":"[{\\"msg_index\\":0,\\"events\\":[{\\"type\\":\\"message\\",\\"attributes\\":[{\\"key\\":\\"action\\",\\"value\\":\\"/payment.MsgPayForData\\"}]},{\\"type\\":\\"payfordata\\",\\"attributes\\":[{\\"key\\":\\"signer\\",\\"value\\":\\"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw\\"},{\\"key\\":\\"size\\",\\"value\\":\\"27\\"}]}]}]",\n   "logs":[\n      {\n         "msg_index":0,\n         "events":[\n            {\n               "type":"message",\n               "attributes":[\n                  {\n                     "key":"action",\n                     "value":"/payment.MsgPayForData"\n                  }\n               ]\n            },\n            {\n               "type":"payfordata",\n               "attributes":[\n                  {\n                     "key":"signer",\n                     "value":"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw"\n                  },\n                  {\n                     "key":"size",\n                     "value":"27"\n                  }\n               ]\n            }\n         ]\n      }\n   ],\n   "events":[\n      {\n         "type":"coin_spent",\n         "attributes":[\n            {\n               "key":"spender",\n               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",\n               "index":true\n            },\n            {\n               "key":"amount",\n               "value":"1utia",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"coin_received",\n         "attributes":[\n            {\n               "key":"receiver",\n               "value":"celestia17xpfvakm2amg962yls6f84z3kell8c5lpnjs3s",\n               "index":true\n            },\n            {\n               "key":"amount",\n               "value":"1utia",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"transfer",\n         "attributes":[\n            {\n               "key":"recipient",\n               "value":"celestia17xpfvakm2amg962yls6f84z3kell8c5lpnjs3s",\n               "index":true\n            },\n            {\n               "key":"sender",\n               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",\n               "index":true\n            },\n            {\n               "key":"amount",\n               "value":"1utia",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"message",\n         "attributes":[\n            {\n               "key":"sender",\n               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"fee",\n               "value":"1utia",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"acc_seq",\n               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws/267",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"signature",\n               "value":"JMNihnKS/MtYJDprqEFGJuXh16tVADsDDxXaFFpvv2te57btl4LbiRzwRRiN2rvwkJ2zlAApu2ImT22MZBi5+A==",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"fee",\n               "value":"",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"acc_seq",\n               "value":"celestia13zx48t96zauht0kpcn0kcfykc9wn8fehzcp9wq/1024",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"signature",\n               "value":"mIZIjbzN0/RQAlQN7TDWzqtey3vVBPe7IO3+IIDhJstIH8QU9vsHfl0Rql9qWMZQG4dM+77w9WmUcnCeS7edfw==",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"fee",\n               "value":"",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"acc_seq",\n               "value":"celestia1h36gnnwzneu0csqzn2waph5y983hf3dkaznlgz/0",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"tx",\n         "attributes":[\n            {\n               "key":"signature",\n               "value":"sfy+XyP7iWU+V9q3zEIOWxbGihvhzUKRLNVeXP+a+5oRefIA/Pyqfm13A5NU9I27hhfvpqo9vhXW1waRgcI9OA==",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"message",\n         "attributes":[\n            {\n               "key":"action",\n               "value":"/payment.MsgPayForData",\n               "index":true\n            }\n         ]\n      },\n      {\n         "type":"payfordata",\n         "attributes":[\n            {\n               "key":"signer",\n               "value":"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw",\n               "index":true\n            },\n            {\n               "key":"size",\n               "value":"27",\n               "index":true\n            }\n         ]\n      }\n   ]\n}\n')),(0,l.kt)("p",null,"Si vous remarquez sur la sortie ci-dessus, elle renvoie une ",(0,l.kt)("inlineCode",{parentName:"p"},"height")," de ",(0,l.kt)("inlineCode",{parentName:"p"},"2452")," que nous utiliserons pour la prochaine commande."),(0,l.kt)("h4",{id:"d\xe9pannage"},"D\xe9pannage"),(0,l.kt)("p",null,"Si vous rencontrez une erreur telle que\xa0:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},'$ curl -X POST -d \'{"namespace_id": "c14da9d459dc57f5", "data": "4f7a3f1aadd83255b8410fef4860c0cd2eba82e24a", "gas_limit": 60000}\'  localhost:26658/submit_pfd\n"rpc error: code = NotFound desc = account celestia1krkle0n547u0znz3unnln8paft2dq4z3rznv86 not found"\n')),(0,l.kt)("p",null,"Il est possible que le compte auquel vous essayez de soumettre un frais PayForData n'ait pas encore de tokens. V\xe9rifiez que le faucet du testnet a envoy\xe9 des tokens sur votre adresse puis r\xe9essayez."),(0,l.kt)("h3",{id:"obtenir-des-partages-despace-de-noms-par-hauteur-de-bloc"},"Obtenir des partages d'espace de noms par hauteur de bloc"),(0,l.kt)("p",null,"Apr\xe8s avoir soumis votre transaction PFD, en cas de succ\xe8s, le node retournera la hauteur de bloc pour laquelle la transaction PFD a \xe9t\xe9 incluse. Vous pouvez ensuite utiliser cette hauteur de bloc et l'ID d'espace de noms avec lesquels vous avez soumis votre transaction PFD pour que vos partages de messages vous soient retourn\xe9s. Dans cet exemple, la hauteur de bloc que nous avons obtenue \xe9tait de 589, que nous utiliserons pour la commande suivante."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"curl -X GET \\\n  http://localhost:26658/namespaced_shares/0c204d39600fddd3/height/2452\n")),(0,l.kt)("p",null,"G\xe9n\xe8rera cette sortie :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "shares":[\n      "DCBNOWAP3dMb8fIMqAB+kQo7+LLmHaDya8oH73hxem6lQWX1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="\n   ],\n   "height":2452\n}\n')),(0,l.kt)("p",null,"La sortie ici est encod\xe9e en base64."))}A.isMDXComponent=!0}}]);