"use strict";(self.webpackChunkcelestia_docs=self.webpackChunkcelestia_docs||[]).push([[4996],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=u(n),m=l,g=p["".concat(s,".").concat(m)]||p[m]||c[m]||i;return n?a.createElement(g,r(r({ref:t},d),{},{components:n})):a.createElement(g,r({ref:t},d))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,r[1]=o;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8498:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return c}});var a=n(7462),l=n(3366),i=(n(7294),n(3905)),r=["components"],o={},s=void 0,u={unversionedId:"nodes/light-node",id:"nodes/light-node",title:"light-node",description:"- - -",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/nodes/light-node.md",sourceDirName:"nodes",slug:"/nodes/light-node",permalink:"/fr/nodes/light-node",draft:!1,editUrl:"https://github.com/celestiaorg/docs/tree/main/docs/nodes/light-node.md",tags:[],version:"current",frontMatter:{},sidebar:"nodes",previous:{title:"full-storage-node",permalink:"/fr/nodes/full-storage-node"},next:{title:"Participer aux Testnets de Celestia",permalink:"/fr/nodes/participate"}},d={},c=[{value:"Pr\xe9sentation des Light Nodes",id:"pr\xe9sentation-des-light-nodes",level:2},{value:"Configuration mat\xe9rielle requise",id:"configuration-mat\xe9rielle-requise",level:2},{value:"Configuration de votre Light Node",id:"configuration-de-votre-light-node",level:2},{value:"Configurer les d\xe9pendances",id:"configurer-les-d\xe9pendances",level:3},{value:"Installer Golang",id:"installer-golang",level:3},{value:"Installer un n\u0153ud Celestia",id:"installer-un-n\u0153ud-celestia",level:3},{value:"Installation du devnet Arabica",id:"installation-du-devnet-arabica",level:4},{value:"Installation du testnet Mamaki",id:"installation-du-testnet-mamaki",level:4},{value:"Initialiser le Light Node",id:"initialiser-le-light-node",level:2},{value:"D\xe9marrer le Light Node",id:"d\xe9marrer-le-light-node",level:3},{value:"Configuration d&#39;Arabica",id:"configuration-darabica",level:4},{value:"Configuration de Mamaki",id:"configuration-de-mamaki",level:4},{value:"Cl\xe9s et portefeuilles",id:"cl\xe9s-et-portefeuilles",level:3},{value:"Optionnel : ex\xe9cuter le Light Node avec une cl\xe9 personnalis\xe9e",id:"optionnel--ex\xe9cuter-le-light-node-avec-une-cl\xe9-personnalis\xe9e",level:3},{value:"Optionnel : d\xe9marrer un light node avec SystemD",id:"optionnel--d\xe9marrer-un-light-node-avec-systemd",level:3},{value:"\xc9chantillonnage de disponibilit\xe9 des donn\xe9es (DAS)",id:"\xe9chantillonnage-de-disponibilit\xe9-des-donn\xe9es-das",level:2}],p={toc:c};function m(e){var t=e.components,o=(0,l.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("hr",null),(0,i.kt)("p",null,"sidebar_label : Light Node"),(0,i.kt)("hr",null),(0,i.kt)("h1",{id:"configuration-dun-light-node-celestia"},"Configuration d'un Light Node Celestia"),(0,i.kt)("p",null,"Ce tutoriel vous guidera \xe0 travers la mise en place d'un Light Node Celestia, qui vous permettra d'effectuer des \xe9chantillonnages de disponibilit\xe9 de donn\xe9es sur le r\xe9seau de disponibilit\xe9 de donn\xe9es (Data Availability/DA)."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Pour voir un tutoriel vid\xe9o pour la mise en place d'un Light Node Celestia, cliquez ",(0,i.kt)("a",{parentName:"p",href:"/fr/developers/light-node-video"},"ici"))),(0,i.kt)("h2",{id:"pr\xe9sentation-des-light-nodes"},"Pr\xe9sentation des Light Nodes"),(0,i.kt)("p",null,"Les Light nodes s'assurent de la disponibilit\xe9 des donn\xe9es. C'est le moyen le plus commun d'interagir avec le r\xe9seau Celestia."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Light Node",src:n(5540).Z,width:"1058",height:"245"})),(0,i.kt)("p",null,"Les Light Nodes ont le comportement suivant :"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Ils \xe9coutent les ExtendedHeaders, c'est-\xe0-dire les en-t\xeates \xab bruts\xbb envelopp\xe9s, qui notifient les nodes Celestia des nouveaux en-t\xeates de blocs et des m\xe9tadonn\xe9es DA pertinentes."),(0,i.kt)("li",{parentName:"ol"},"Ils effectuent l'\xe9chantillonnage de la disponibilit\xe9 des donn\xe9es (DAS) sur les en-t\xeates re\xe7us.")),(0,i.kt)("h2",{id:"configuration-mat\xe9rielle-requise"},"Configuration mat\xe9rielle requise"),(0,i.kt)("p",null,"Les exigences mat\xe9rielles minimales suivantes sont recommand\xe9es pour ex\xe9cuter un Light node :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"M\xe9moire: 2 Go de RAM"),(0,i.kt)("li",{parentName:"ul"},"CPU : Noyau unique"),(0,i.kt)("li",{parentName:"ul"},"Disque: 5 Go de stockage SSD"),(0,i.kt)("li",{parentName:"ul"},"Bande passante : 56 Go/s pour le download/56 Mo/s pour l'upload")),(0,i.kt)("h2",{id:"configuration-de-votre-light-node"},"Configuration de votre Light Node"),(0,i.kt)("p",null,"Le tutoriel suivant est fait sur une machine d'instance Ubuntu Linux 20.04 (LTS) x64."),(0,i.kt)("h3",{id:"configurer-les-d\xe9pendances"},"Configurer les d\xe9pendances"),(0,i.kt)("p",null,"Premi\xe8rement v\xe9rifiez que votre syst\xe8me d'exploitation est \xe0 jour ou mettez-le \xe0 jour :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"# Si vous utilisez le gestionnaire de paquet APT\nsudo apt update && sudo apt upgrade -y\n\n# Si vous utilisez le gestionnaire de paquet YUM \nsudo yum update\n")),(0,i.kt)("p",null,"Ce sont des paquets essentiels pour ex\xe9cuter de nombreuses t\xe2ches comme le t\xe9l\xe9chargement de fichiers, la compilation et la surveillance du n\u0153ud :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"# Si vous utilisez le gestionnaire de paquet APT\nsudo apt install curl tar wget clang pkg-config libssl-dev jq build-essential \\\ngit make ncdu -y\n\n# Si vous utilisez le gestionnaire de paquet YUM \nsudo yum install curl tar wget clang pkg-config libssl-dev jq build-essential \\\ngit make ncdu -y\n")),(0,i.kt)("h3",{id:"installer-golang"},"Installer Golang"),(0,i.kt)("p",null,"La Celestia App et le noeud Celestia sont cod\xe9s en ",(0,i.kt)("a",{parentName:"p",href:"https://go.dev/"},"Golang")," donc nous devons installer Golang pour les construire et les ex\xe9cuter."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'ver="1.19.1"\ncd $HOME\nwget "https://golang.org/dl/go$ver.linux-amd64.tar.gz"\nsudo rm -rf /usr/local/go\nsudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz"\nrm "go$ver.linux-amd64.tar.gz"\n')),(0,i.kt)("p",null,"Maintenant nous devons ajouter le r\xe9pertoire ",(0,i.kt)("inlineCode",{parentName:"p"},"/usr/local/go/bin")," \xe0 ",(0,i.kt)("inlineCode",{parentName:"p"},"$PATH"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.bash_profile\nsource $HOME/.bash_profile\n')),(0,i.kt)("p",null,"Pour v\xe9rifier que Go a \xe9t\xe9 install\xe9 correctement, lancez :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"go version\n")),(0,i.kt)("p",null,"Le r\xe9sultat devrait \xeatre la version install\xe9e suivante :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"go version go1.18.2 linux/amd64\n")),(0,i.kt)("h3",{id:"installer-un-n\u0153ud-celestia"},"Installer un n\u0153ud Celestia"),(0,i.kt)("p",null,"Une chose \xe0 faire ici est de d\xe9cider quelle version du n\u0153ud Celestia vous d\xe9cidez de compiler. Le testnet Mamaki requiert v0.3.0-rc2 et le Devnet Arabica requiert v0.3.0."),(0,i.kt)("p",null,"Les sections suivantes soulignent comment l'installer pour les deux r\xe9seaux."),(0,i.kt)("h4",{id:"installation-du-devnet-arabica"},"Installation du devnet Arabica"),(0,i.kt)("p",null,"Installez le binaire du n\u0153ud Celestia en ex\xe9cutant les commandes suivantes :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"cd $HOME\nrm -rf celestia-node\ngit clone https://github.com/celestiaorg/celestia-node.git\ncd celestia-node/\ngit checkout tags/v0.3.1\nmake install\nmake cel-key\n")),(0,i.kt)("p",null,"V\xe9rifiez que le binaire fonctionne et la version avec la commande Celestia ci-dessous :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"$ celestia version\nSemantic version: v0.3.1\nCommit: 8bce8d023f9d0a1929e56885e439655717aea4e4\nBuild Date: Thu Sep 22 15:15:43 UTC 2022\nSystem version: amd64/linux\nGolang version: go1.19.1\n")),(0,i.kt)("h4",{id:"installation-du-testnet-mamaki"},"Installation du testnet Mamaki"),(0,i.kt)("p",null,"Installez le binaire du n\u0153ud Celestia en ex\xe9cutant les commandes suivantes :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"cd $HOME\nrm -rf celestia-node\ngit clone https://github.com/celestiaorg/celestia-node.git\ncd celestia-node/\ngit checkout tags/v0.3.0-rc2\nmake install\nmake cel-key\n")),(0,i.kt)("p",null,"V\xe9rifiez que le binaire fonctionne et la version avec la commande Celestia ci-dessous :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"$ celestia version\nSemantic version: v0.3.0-rc2\nCommit: 89892d8b96660e334741987d84546c36f0996fbe\n")),(0,i.kt)("h2",{id:"initialiser-le-light-node"},"Initialiser le Light Node"),(0,i.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light init\n")),(0,i.kt)("p",null,"Vous devriez voir quelque chose comme :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-output"},'$ celestia light init\n2022-07-18T02:22:09.449Z INFO node node/init.go:26 Initializing Light Node Store over \'/home/ec2-user/.celestia-light\'\n2022-07-18T02:22:09.449Z INFO node node/init.go:62 Saving config {"path": "/home/ec2-user/.celestia-light/config.toml"}\n2022-07-18T02:22:09.449Z INFO node node/init.go:67 Node Store initialized\n')),(0,i.kt)("h3",{id:"d\xe9marrer-le-light-node"},"D\xe9marrer le Light Node"),(0,i.kt)("p",null,"D\xe9marre le Light node avec une connexion au point de terminaison gRPC d'un node de validateur (qui est g\xe9n\xe9ralement expos\xe9 sur le port 9090):"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"REMARQUE : Pour avoir acc\xe8s \xe0 la possibilit\xe9 d'obtenir/de soumettre des informations relatives \xe0 l'\xe9tat, telles que la possibilit\xe9 de soumettre des transactions PayForData ou d'interroger solde de compte du node, un point de terminaison gRPC d'un Node Validateur (core) doit \xeatre transmis comme montr\xe9 ci-dessous.")),(0,i.kt)("p",null,"Concernant les ports :"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"NOTE : Le port ",(0,i.kt)("inlineCode",{parentName:"p"},"--core.grpc.port")," est configur\xe9 par d\xe9faut \xe0 9090, donc si vous n'en sp\xe9cifiez pas un autre dans la ligne de commande, il s'ex\xe9cutera sur celui-l\xe0 par d\xe9faut. Vous pouvez utiliser le drapeau pour sp\xe9cifier un autre port si vous le pr\xe9f\xe9rez.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip <ip-address> --core.grpc.port <port>\n")),(0,i.kt)("h4",{id:"configuration-darabica"},"Configuration d'Arabica"),(0,i.kt)("p",null,"Si vous avez besoin d'une liste de terminaux RPC pour vous connecter, vous pouvez v\xe9rifier dans la liste ",(0,i.kt)("a",{parentName:"p",href:"/fr/nodes/arabica-devnet#rpc-endpoints"},"ici")),(0,i.kt)("p",null,"Par exemple, votre commande pourrait ressembler \xe0 cela :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip https://limani.celestia-devops.dev --core.grpc.port 9090\n")),(0,i.kt)("h4",{id:"configuration-de-mamaki"},"Configuration de Mamaki"),(0,i.kt)("p",null,"Si vous avez besoin d'une liste de terminaux RPC pour vous connecter, vous pouvez v\xe9rifier dans la liste ",(0,i.kt)("a",{parentName:"p",href:"/fr/nodes/mamaki-testnet#rpc-endpoints"},"ici")),(0,i.kt)("p",null,"Par exemple, votre commande pourrait ressembler \xe0 cela :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip https://rpc-mamaki.pops.one --core.grpc.port 9090\n")),(0,i.kt)("h3",{id:"cl\xe9s-et-portefeuilles"},"Cl\xe9s et portefeuilles"),(0,i.kt)("p",null,"Vous pouvez cr\xe9er votre cl\xe9 pour votre n\u0153ud en ex\xe9cutant la commande suivante :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"./cel-key add <key_name> --keyring-backend test --node.type light\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip <ip-address> --core.grpc.port <port> --keyring.accname <key_name>\n")),(0,i.kt)("p",null,"Une fois que vous d\xe9marrez le Light Node, une cl\xe9 de wallet sera g\xe9n\xe9r\xe9e pour vous. Vous aurez besoin d'approvisionner cette adresse avec des jetons du testnet Mamaki pour payer les transactions de type PayForData."),(0,i.kt)("p",null,"Vous pouvez trouver cette adresse en ex\xe9cutant la commande suivante dans le r\xe9pertoire ",(0,i.kt)("inlineCode",{parentName:"p"},"celestia-node")," :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"./cel-key list --node.type light --keyring-backend test\n")),(0,i.kt)("p",null,"Vous avez le choix entre deux r\xe9seaux pour obtenir des jetons de testnet :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/fr/nodes/arabica-devnet#arabica-devnet-faucet"},"Arabica")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/fr/nodes/mamaki-testnet#mamaki-testnet-faucet"},"Mamaki"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"NOTE : Si vous souhaitez lancer un light node pour votre rollup souverain, il est hautement recommand\xe9 de demander des jetons du devnet Arabica car c'est le devnet qui re\xe7oit les derni\xe8res mises \xe0 jour utiles au d\xe9veloppement de votre rollup souverain. Vous pouvez \xe9galement utiliser le testnet Mamaki, bien qu'il soit davantage con\xe7u pour les op\xe9rations de Validateurs.")),(0,i.kt)("p",null,"Vous pouvez demander des fonds \xe0 l'adresse de votre portefeuille en utilisant la commande suivante dans Discord :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-console"},"$request <Wallet-Address>\n")),(0,i.kt)("p",null,"Dans laquelle ",(0,i.kt)("inlineCode",{parentName:"p"},"<Wallet-Address>")," est l'adresse ",(0,i.kt)("inlineCode",{parentName:"p"},"celestia1******")," g\xe9n\xe9r\xe9e quand vous avez cr\xe9\xe9 le portefeuille."),(0,i.kt)("h3",{id:"optionnel--ex\xe9cuter-le-light-node-avec-une-cl\xe9-personnalis\xe9e"},"Optionnel : ex\xe9cuter le Light Node avec une cl\xe9 personnalis\xe9e"),(0,i.kt)("p",null,"Afin d'ex\xe9cuter un Light Node en utilisant une cl\xe9 personnalis\xe9e :"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"La cl\xe9 personnalis\xe9e doit exister dans le r\xe9pertoire du Light Node Celestia au bon chemin (default: ",(0,i.kt)("inlineCode",{parentName:"li"},"~/.celestia-light/keys/keyring-test"),")"),(0,i.kt)("li",{parentName:"ol"},"Le nom de la cl\xe9 personnalis\xe9e doit \xeatre transmis lors de ",(0,i.kt)("inlineCode",{parentName:"li"},"start"),", comme ceci:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"celestia light start --core.ip <ip-address> --core.grpc.port <port> --keyring.accname <name_of_custom_key>\n")),(0,i.kt)("h3",{id:"optionnel--d\xe9marrer-un-light-node-avec-systemd"},"Optionnel : d\xe9marrer un light node avec SystemD"),(0,i.kt)("p",null,"Suivez le tutoriel sur la configuration du Light Node en tant que processus d'arri\xe8re-plan avec SystemD ",(0,i.kt)("a",{parentName:"p",href:"/fr/nodes/systemd#celestia-light-node"},"ici"),"."),(0,i.kt)("h2",{id:"\xe9chantillonnage-de-disponibilit\xe9-des-donn\xe9es-das"},"\xc9chantillonnage de disponibilit\xe9 des donn\xe9es (DAS)"),(0,i.kt)("p",null,"Avec votre light node en cours d'ex\xe9cution, vous pouvez consulter ce tutoriel sur la soumission de transactions ",(0,i.kt)("inlineCode",{parentName:"p"},"PayForData")," ",(0,i.kt)("a",{parentName:"p",href:"/fr/developers/node-tutorial"},"ici"),"."))}m.isMDXComponent=!0},5540:function(e,t,n){t.Z=n.p+"assets/images/LightNodes-6e065ce02c37e36a01707b9b1edd36b3.png"}}]);